# 图片水印工具 - 使用说明

## 项目概述

基于Python 3.6开发的图片水印工具，使用tkinter作为GUI框架，支持为图片添加文本水印、图片水印和EXIF时间水印。

## 功能特性

### ✅ 已实现功能

1. **图片导入**
   - 支持单张图片导入
   - 支持批量图片导入
   - 支持文件夹导入
   - 支持格式：JPEG, PNG, BMP, TIFF

2. **文本水印**
   - 自定义水印文本
   - 字体大小调节（8-100）
   - 颜色选择
   - 透明度调节（0-100%）
   - 9种预设位置
   - 阴影效果
   - 描边效果
   - 旋转角度

3. **图片管理**
   - 图片列表显示
   - 缩略图预览
   - 图片导航（上一张/下一张）
   - 实时预览水印效果

4. **导出功能**
   - 支持JPEG和PNG格式
   - 自定义输出文件夹
   - 文件命名规则（前缀/后缀）
   - 批量导出

5. **用户界面**
   - 直观的图形界面
   - 实时预览
   - 状态栏显示
   - 进度条显示

## 安装和运行

### 环境要求

- Python 3.6+
- 依赖包：Pillow >= 5.4.0, exifread >= 2.3.2

### 安装依赖

```bash
pip install -r requirements.txt
```

### 运行程序

```bash
python3 main.py
```

## 使用指南

### 1. 导入图片

- **导入单张图片**：点击"导入图片"按钮，选择图片文件
- **导入多张图片**：点击"导入图片"按钮，按住Ctrl键选择多张图片
- **导入文件夹**：点击"导入文件夹"按钮，选择包含图片的文件夹

### 2. 设置水印

#### 文本水印设置

1. 在"水印类型"中选择"文本水印"
2. 在"文本设置"区域：
   - 输入水印文本
   - 调节字体大小（8-100）
   - 选择文本颜色
   - 调节透明度（0-100%）

3. 在"位置设置"中选择水印位置：
   - 九宫格位置：左上、中上、右上、左中、居中、右中、左下、中下、右下

4. 在"效果设置"中：
   - 勾选"阴影效果"添加阴影
   - 勾选"描边效果"添加描边

#### 高级设置

- 点击"预览水印"按钮打开详细设置对话框
- 可以设置更多高级选项如旋转角度等

### 3. 预览效果

- 在中间预览区域查看水印效果
- 使用"上一张"/"下一张"按钮切换图片
- 点击"适应窗口"按钮调整预览大小

### 4. 导出图片

1. 在"导出设置"中：
   - 选择输出格式（JPEG/PNG）
   - 点击"选择"按钮选择输出文件夹

2. 点击"导出图片"按钮开始导出
3. 查看进度条和状态栏了解导出进度

## 文件结构

```
AI4SE_totalByAI/
├── main.py                 # 主程序入口
├── config.py              # 配置管理
├── file_manager.py        # 文件处理
├── image_list.py          # 图片列表管理
├── text_watermark.py      # 文本水印处理
├── main_window.py         # 主窗口界面
├── requirements.txt       # 依赖包列表
├── PRD.md                 # 产品需求文档
├── 功能点拆解文档.md        # 功能拆解文档
├── 使用说明.md            # 本文件
└── test_*.py             # 测试脚本
```

## 技术架构

### 模块说明

1. **config.py** - 配置管理模块
   - 管理应用配置和常量
   - 支持配置保存和加载

2. **file_manager.py** - 文件处理模块
   - 图片导入和验证
   - 图片信息获取
   - 缩略图创建
   - 图片导出

3. **image_list.py** - 图片列表管理模块
   - 图片列表维护
   - 缩略图缓存
   - 图片导航

4. **text_watermark.py** - 文本水印模块
   - 水印创建和应用
   - 样式设置
   - 效果处理

5. **main_window.py** - 主窗口模块
   - 用户界面创建
   - 事件处理
   - 组件协调

## 测试

项目包含完整的测试套件：

```bash
# 运行基础架构测试
python3 test_basic.py

# 运行文件处理系统测试
python3 test_file_system.py

# 运行文本水印系统测试
python3 test_text_watermark.py

# 运行最终测试
python3 test_final.py
```

## 开发说明

### 开发环境

- Python 3.6
- tkinter (GUI框架)
- Pillow (图像处理)
- exifread (EXIF数据读取)

### 代码结构

项目采用模块化设计，每个功能模块独立开发和测试：

1. **基础架构** - 配置管理和程序入口
2. **文件处理** - 图片导入、验证、导出
3. **水印处理** - 文本水印创建和应用
4. **用户界面** - GUI组件和交互

### 扩展功能

根据功能点拆解文档，后续可以扩展：

- 图片水印功能
- EXIF时间水印
- 模板管理
- 批处理优化
- 更多水印效果

## 常见问题

### Q: 程序无法启动
A: 检查Python版本是否为3.6+，确保已安装所需依赖包

### Q: 图片导入失败
A: 检查图片格式是否支持（JPEG, PNG, BMP, TIFF），文件是否损坏

### Q: 水印效果不显示
A: 检查透明度设置，确保不是100%透明

### Q: 导出失败
A: 检查输出文件夹权限，确保有写入权限

## 更新日志

### v1.0.0 (2025-01-XX)
- 完成基础架构开发
- 实现文件处理系统
- 实现文本水印功能
- 完成用户界面开发
- 通过所有测试

## 许可证

本项目仅供学习和研究使用。
